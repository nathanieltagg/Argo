<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Light Monitor</title>
    <script>
      var listener = function (event) {
        var div = document.createElement("div");
        var type = event.type;
        div.appendChild(document.createTextNode("msg:"+event.data));
        document.body.appendChild(div);
      };
      var source = new EventSource("server/lightmonitor.cgi");
      source.onmessage = listener;
      
      source.addEventListener('open', function(e) {
          console.log("opened")
      }, false);
      source.addEventListener('error', function(e) {
          console.log('error');
        if (e.readyState == EventSource.CLOSED) {
            console.log('closed');
        }
      }, false);
      
    </script>
</head>
<body>
</body>
</html>