<!DOCTYPE html>
<html>
<head> 
<meta http-equiv="content-type" content="text/html; charset=utf-8">

<title>Argo Live!</title>
<!--(#)include virtual="basetag.inc"-->


<!-- My little icon in the link url -->
<link rel="icon"  type="image/png" href="images/ArgoIcon" />  

<!-- Activate some overrides to basic configuration. -->

<script type="text/javascript" >
// These lines pull the Server-side-include (SSI) strings.
gPageName='<!--#echo encoding="none" var="PageStyle"-->';
// This is used to get a query string supplied to the page on the server side, but hidden
// from the javascript because of a URL rewrite_mod redirect, which makes URLs prettier.
// URI encoding (server side) and decoding (javascript/clientside) prevents XSS attacks.
gHiddenQueryString=decodeURIComponent('<!--#echo encoding="url" var="QUERY_STRING"-->');
</script>

<!-- Main CSS sheet for basic layout, custom mods. -->
<link rel="stylesheet" href="argo.css" type="text/css" media="all"/>
<link rel="stylesheet" href="live.css" type="text/css" media="all"/>
<link rel="stylesheet" href="selected-object-info.css" type="text/css" media="all"/>
<link rel="stylesheet" href="local.css" type="text/css" media="all"/>

<style>
div.A-ZoomControl {
  height: 100px;
}
div.A-TimeHistogram {
 height: 80px;
}
</style>


<!-- Javascript libraries and code. -->
<!--(#)include virtual="html/libraries.inc"-->
<!--#include virtual="libraries.cgi"-->
<!-- vertex shader -->
<script id="2d-vertex-shader" type="x-shader/x-vertex">
attribute vec2 a_position;
attribute vec2 a_texCoord;

uniform vec2 u_resolution;
varying vec2 v_texCoord;

void main() {

   // convert the rectangle from pixels to 0.0 to 1.0
   vec2 zeroToOne = a_position / u_resolution;

   // convert from 0->1 to 0->2
   vec2 zeroToTwo = zeroToOne * 2.0;

   // convert from 0->2 to -1->+1 (clipspace)
   vec2 clipSpace = zeroToTwo - 1.0;

   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1); // Flips vertically?

   // pass the texCoord to the fragment shader
   // The GPU will interpolate this value between points.
    v_texCoord = a_texCoord;
}
</script>

<script id="stupidfill" type="x-shader/x-fragment">
precision mediump float;

void main() {
  gl_FragColor.r = 255.0;
  gl_FragColor.g = 0.0;
  gl_FragColor.b = 0.0;
  gl_FragColor.a = 255.0;
}

</script>


<script id="lutshade" type="x-shader/x-fragment">
precision mediump float;

uniform sampler2D inputtexture;
uniform sampler2D maptexture;

varying vec2 v_texCoord;

void main() {
  // inc is now the RGBA color of the input pixel, with each color encoded as a float from 0 to 1.
  vec4 inc = texture2D(inputtexture, v_texCoord);
  vec2 lookup_coords = vec2( (floor(inc.g*256.0)+0.5)/256.0 , (floor(inc.r*256.0)+0.5)/256.0 );
  gl_FragColor = texture2D(maptexture, lookup_coords);
}

</script>


<!-- This is a dead one. -->
<script id="lutshade-with-rms-cut" type="x-shader/x-fragment">
precision mediump float;

uniform sampler2D inputtexture;
uniform sampler2D maptexture;
uniform float pedestal_width_cut;

varying vec2 v_texCoord;

void main() {
  // inc is now the RGBA color of the input pixel, with each color encoded as a float from 0 to 1.
  vec4 inc = texture2D(inputtexture, v_texCoord);
  
  // 1d lookup.
  // float adc = 256.*(inc.r*255. + inc.g - 128.);  // True ADC value; typical -4096 to 4096.
  // float lookup_coord = adc/8192. + 0.5; // this is a proper 1:1 mapping, but doesn't use enough dynamic range.
  // vec2 lookup_coords = vec2(lookup_coord,0);
  
  // 2d lookup.
  // Just use r,g. Red is most-significant, green is least-significant.  X is least, Y is most.
  
  // July 27
  // Add a 0.5 pixel offset, to be sure that the nearest pixel we map to in the maptexture is the correct one!
  vec2 lookup_coords = vec2( (floor(inc.g*256.0)+0.5)/256.0 , (floor(inc.r*256.0)+0.5)/256.0 );
  
  // This doesn't work. I don't understand why not.
  // float adc = 256.*(inc.r*256. - 128. + inc.g);  // True ADC value; typical -4096 to 4096.

  // This DOES work and should give the correct ADC value in integers
  int g = int(inc.g*256.0);  
  int r = int(inc.r*256.0);
  int b = int(inc.b*256.0);
  int adc = (r-128)*256 + g;
  if(adc<0) adc = -adc; // abs(int) does not work, and type conversion not so good.
  
  
  int serviceboard = b/16;
  int rms = b - (serviceboard*16);
  int cut = int(float(rms)*pedestal_width_cut/2.0);
  
  
  if( adc < cut ) {
    lookup_coords=vec2(0.,0.5);  // set to be the maptexture color of adc=0.
     // color.r=0.; color.g=0.; color.b=0.;
   }
   vec4 color = texture2D(maptexture, lookup_coords);
  
  // Debug: This just draws our input texture.
  // color = texture2D(maptexture,v_texCoord);
  
  // Debug: this draws a little four-square texture to show me where the mapping is.
  // // Output color is RGBA color with colors encoded between 0 and 1.
  // color.r = 255.; color.g = 0.; color.b = 0.; color.a=255.;
  // if(v_texCoord.x>0.5 &&v_texCoord.y>0.5 ) { color.r = 0.; color.g = 255.; color.b = 0.; color.a=255.; }
  // if(v_texCoord.x<0.5  &&v_texCoord.y<0.5) { color.r = 0.; color.g = 0.; color.b = 255.; color.a=255.; }
  
  gl_FragColor = color;
}

</script>












<script id="lutshade-with-noise-removal" type="x-shader/x-fragment">
precision mediump float;

uniform sampler2D inputtexture;
uniform sampler2D maptexture;
uniform int   do_noise_reject;
uniform int   do_bad_channel_flag;
varying vec2 v_texCoord;

void main() {
  // inc is now the RGBA color of the input pixel, with each color encoded as a float from 0 to 1.
  vec4 inc = texture2D(inputtexture, v_texCoord);
  
  
  // // This DOES work and should give the correct ADC value in integers
  int g = int(inc.g*255.0);
  int r = int(inc.r*255.0);
  int b = int(inc.b*255.0);
  
  // Subtract the noise which is stored in the blue channel.
  if(do_noise_reject>0 && b<0xff) {
    g = g - b + 128;
    if(g<0)   { r-=1; g+=256;}
    if(g>255) { r+=1; g-=256;}
  }
  if(b==0xff && do_bad_channel_flag==0) { g=0x80; r=0x80; } // dead channel - zero it out.
  
  vec2 lookup_coords = vec2( (float(g)+0.5)/256.0 , (float(r)+0.5)/256.0 );
  gl_FragColor = texture2D(maptexture, lookup_coords);
  

  if(b==0xff && do_bad_channel_flag==2) { gl_FragColor.r = 0.; gl_FragColor.g = 0.; gl_FragColor.b=0.; gl_FragColor.a=0.;} // dead channel - black out.
  
  // July 27
  // Add a 0.5 pixel offset, to be sure that the nearest pixel we map to in the maptexture is the correct one!
  // vec2 lookup_coords = vec2( (floor(inc.g*256.0)+0.5)/256.0 , (floor(inc.r*256.0)+0.5)/256.0 );
   
}
</script>



<script id="lutshade-with-noise-removal-and-smear" type="x-shader/x-fragment">
precision mediump float;

uniform sampler2D inputtexture;
uniform sampler2D maptexture;
uniform int   do_noise_reject;
uniform int   do_bad_channel_flag;
varying vec2 v_texCoord;
uniform int   do_smear;
uniform int   do_edge_finder;
uniform float pixel_width_x;
uniform float pixel_width_y;

void main() {
  // inc is now the RGBA color of the input pixel, with each color encoded as a float from 0 to 1.
  vec4 inc = texture2D(inputtexture, v_texCoord);
  
  
  if(do_smear>0){
    inc = inc*0.;
    vec2 coord;
    
    coord = vec2(v_texCoord.x,v_texCoord.y+pixel_width_y);
    inc += 0.25*texture2D(inputtexture, coord);
    coord = vec2(v_texCoord.x,v_texCoord.y-pixel_width_y);
    inc += 0.25*texture2D(inputtexture, coord);
    coord = vec2(v_texCoord.x+pixel_width_x,v_texCoord.y);
    inc += 0.25*texture2D(inputtexture, coord);
    coord = vec2(v_texCoord.x-pixel_width_x,v_texCoord.y);
    inc += 0.25*texture2D(inputtexture, coord);
  }


  
  // // This DOES work and should give the correct ADC value in integers
  int g = int(inc.g*255.0);
  int r = int(inc.r*255.0);
  int b = int(inc.b*255.0);
  
  // Subtract the noise which is stored in the blue channel.
  if(do_noise_reject>0 && b<0xff) {
    g = g - b + 128;
    if(g<0)   { r-=1; g+=256;}
    if(g>255) { r+=1; g-=256;}
  }

  if(do_edge_finder>0) {
    vec4 inc2 = texture2D(inputtexture,  vec2(v_texCoord.x+(pixel_width_x),v_texCoord.y));
    int g2 = int(inc2.g*255.0);
    int r2 = int(inc2.r*255.0);
    int b2 = int(inc2.b*255.0);
    if(do_noise_reject>0 && b2<0xff) {
      g2 = g2 - b2 + 128;
      if(g2<0)   { r2-=1; g2+=256;}
      if(g2>255) { r2+=1; g2-=256;}
    }

    g = (g - g2) + 0x80;
    r = (r - r2) + 0x80;
    if(g<0)   { r-=1; g+=256;}
    if(g>255) { r+=1; g-=256;}
    if(g<0)   { r-=1; g+=256;}
    if(g>255) { r+=1; g-=256;}
    if(g<0)   { r-=1; g+=256;}
    if(g>255) { r+=1; g-=256;}
  }

  if(b==0xff && do_bad_channel_flag==0) { g=0x80; r=0x80; } // dead channel - zero it out.


  vec2 lookup_coords = vec2( (float(g)+0.5)/256.0 , (float(r)+0.5)/256.0 );
  gl_FragColor = texture2D(maptexture, lookup_coords);
  

  if(b==0xff && do_bad_channel_flag==2) { gl_FragColor.r = 0.; gl_FragColor.g = 0.; gl_FragColor.b=0.; gl_FragColor.a=0.;} // dead channel - black out.
  

    
}

</script>



</head>


<body>
<div id='everything'>

  <div style="float:left;">
    <!-- <span style="font-size: 10em;"><img src="images/argo.jpg" alt="Argo - the Microboone Web Event Display" style="height:100px;">Argo</span> -->
      <img src="images/argo_logo_2.0.png" alt="Argo - the Microboone Web Event Display" style="height:50px;"><br/>
  </div>
  
  <table style="width: 50%;"><tr>
  <td style="width: 5%;">Status:</td><td><div id="status">Script loading...</div></td>
  </tr></table>
  <div id ='live-status'>
    Backend Heartbeat:
    <div id='heartbeat-status'>
      server not contacted yet
    </div>
  </div>
  <div id='event-id-info'>
    Event: <span class='event-run'></span>|<span class='event-subrun'></span>|<span class='event-event'></span>   
    <br/>
    <span class="val event-date">unknown</span>
    <span class="val event-time">unknown</span>
    (<span class="val event-age">unknown</span>)
  </div>
  <div class='A-LiveControl' style="display: inline-block; width:500px;">
    <div style="border: solid 1px black; ">
      <input class="ui-state-default ui-corner-all" type="button" id="go_livedata" value="Get Live Data!" style="float:left; margin:10px"/>
      <div id='refresh-clock' style='float:left; width: 25px; margin:10px; display:inline-block;'></div>
      <span><label for="ctl-refresh-auto">Auto-refresh live data:</label><input id="ctl-refresh-auto" name="ctl-refresh-auto" type="checkbox" checked="yes" class="saveable auto-save-on-change"/><br/>
      <label for="ctl-refresh-period">Cycle event every:</label><input id="ctl-refresh-period" name="ctl-refresh-period" type="text" size="5" class="saveable" value="60.0" />seconds</span>
    </div>

    <div style="clear:both; border: solid 1px black; ">
      <label for="ctl-live-keep-up">Keep up with all events:</label><input id="ctl-live-keep-up" name="ctl-live-keep-up" type="checkbox" />
      (For laser / low event rate use)  
      <div  id='recentEvents'>(Your computer may be <a href='server-sent-event-problems.html'>blocking the event stream</a>)</div>
    </div>
  </div>

  <div style="clear:both;"></div>
  <div id="expando-target" style="z-index:998;"></div>
  <div id='display-zone' style="display:flex; width:100%; align-items: stretch;">
    <div id='live-rightbar2' style='flex: 1 auto; pading: 20px; min-width: 100px;'>
        <div><input type="checkbox" id="ctl-show-hits"    name="show-hits"  class="saveable auto-save-on-change show-hits"  /><label for="ctl-show-hits">    <b>(h)</b> Show Hits </label>
        <input type="checkbox" id="ctl-show-wireimg" name="show-wireimg" checked="checked" class="saveable auto-save-on-change show-wireimg" /><label for="ctl-show-wireimg"><b>(w)</b> Show Wires</label>
     <button  style='font-size: 10px;' class="ctl-restore-defaults" />Restore Defaults</button>
     </div>
    
        <div class="portlet" id="eventinfo-port"> 
        <div class="portlet-header">Event Info</div>
          <div  class="portlet-content">
            <div class="A-EventInfo">
              <table class="eventinfo"><tbody>
                <tr><td class="key">Run</td>        <td class="val event-run">?</td></tr>
                <tr><td class="key">SubRun</td>     <td class="val event-subrun">?</td></tr>
                <tr><td class="key">Event</td>      <td class="val event-event">?</td></tr>
                <tr><td class="key">Data Type</td>  <td class="val event-datatype">MC</td></tr>
                <tr><td class="key">Entry</td>      <td><span class="val event-entry">?</span>/<span class="val event-numEntriesInFile"></span></td></tr>
                <tr><td class="key">Date:</td>      <td class="val event-time"></td></tr>
               <tr><td class="key">Drift HV       </td>  <td class="val event-hv">Unknown</td></tr>
		        <tr><td class="key">Trigger</td>  <td><span class="val event-triggerword"></span><br>
                                              <span class="val event-triggernames"></span><br>
                                              <span class="val event-swtriggernames"></span></td></tr>


              </tbody></table>
        
              <div class="event-laser-info"></div>
          
            </div>
          </div>
        </div>  <!-- portlet -->

      <style>
.psuedoColorRow{ display:-webkit-flex; display:flex; }
.psuedoColorRow .pslabel{ -webkit-flex-basis: 40px; flex-basis: 40px;}
.psuedoColorRow .psslide{ display:inline-block; -webkit-flex-grow: 1; flex-grow: 1; }
.psuedoColorRow .psval  { font-size: 0.7em; -webkit-flex-basis:25px;flex-basis:25px; -webkit-flex-grow:0; flex-grow:0; }
.psuedoCutoffLow { width: 15px;}
.psuedoCutoffHigh {width: 15px;}
  
</style>
<div class="portlet" id="falsecolorcontrol-port"> 
  <div class="portlet-header">Wire False Color</div>
  <div class="portlet-content">
  <div class="A-FalseColorControl">

 <!-- <select class="false-color-type saveable" id="false-color-type">
   <option value="1"     selected="selected">Blue-Green</option> -->
   <!-- <option value="2"                        >Threshold</option> -->
 <!-- </select> -->
 <!-- <button class="falseColorMinus1">-1</button>
 <button class="falseColorPlus1">+1</button> -->
      <div class="hist-element" style="height: 120px"></div>
      <input type="hidden" id="falsecolor-scheme" value="falsecolor-Rainbow" class='saveable auto-save-on-change'/>

  	<ul>
      <li><a href="#falsecolor-Rainbow">Rainbow</a></li>
      <li><a href="#falsecolor-Grayscale">Gray</a></li>
      <li><a href="#falsecolor-LOCS">LOCS</a></li>
      <li><a href="#falsecolor-Brightness">Bright</a></li>
      <li><a href="#falsecolor-Blackbody">BB</a></li>
      <li><a href="#falsecolor-RootRainbow">Root</a></li>
      <li><a href="#falsecolor-Interp2">Intp2</a></li>
      <!-- <li><a href="#falsecolor-Interp3">Intp3</a></li> -->
      <li><a href="#falsecolor-Interp4">Intp4</a></li>
      
  	</ul>
    
    <div id="falsecolor-Rainbow" class='falsecolor-tab'>
 
    
      Hue-rotation <br/>
      <div class='psuedoColorRow' > <span class='pslabel'>Shift</span>
                <div class='psslide psuedoDialOffsetSlider'></div>
                <input id='falsecolor-rainbow-dialoffset' class='psval  psuedoDialOffset' type="number" value='0.754' width='3'/></div>

      <div class='psuedoColorRow' > <span class='pslabel'>Warp</span> 
                <div class='psslide psuedoAdcScaleSlider'></div> 
                <input id='falsecolor-rainbow-adcscale' class='psval  psuedoAdcScale'  type="text"  value='153.5' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Scale</span>
                <div class='psslide psuedoDialScaleSlider'></div>
                <input id='falsecolor-rainbow-dialscale' class='psval  psuedoDialScale'  type="text"  value='0.7' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Satr</span>
                <div class='psslide psuedoSaturationSlider'></div>
                <input id='falsecolor-rainbow-saturation' class='psval  psuedoSaturation'  type="text" value='0.8' width='3'/> </div>

      <div class='psuedoColorRow'> Cutoff &nbsp;
        <input id='falsecolor-rainbow-cutlow' class='psval  psuedoCutoffLow'  type="text"  value='0' width='3'/>&nbsp; to &nbsp;
        <input id='falsecolor-rainbow-cuthigh'class='psval  psuedoCutoffHigh'  type="text" value='5' width='3'/></span>&nbsp; ADC &nbsp;
      </div>

    </div>



    <div id="falsecolor-Grayscale" class='falsecolor-tab'>
      Grayscale <br/>
      <div class='psuedoColorRow' > <span class='pslabel'>Shift</span>
                <div class='psslide psuedoDialOffsetSlider'></div>
                <input id='falsecolor-grayscale-dialoffset' class='psval saveable psuedoDialOffset' type="number" value='0' width='3'/></div>

      <div class='psuedoColorRow' > <span class='pslabel'>Warp</span> 
                <div class='psslide psuedoAdcScaleSlider'></div> 
                <input id='falsecolor-grayscale-adcscale' class='psval saveable psuedoAdcScale'  type="text"  value='20' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Scale</span>
                <div class='psslide psuedoDialScaleSlider'></div>
                <input id='falsecolor-grayscale-dialscale' class='psval saveable psuedoDialScale'  type="text"  value='0.5' width='3'/> </div>

      <!-- <div class='psuedoColorRow' > <span class='pslabel'>Satr</span>
                <div class='psslide psuedoSaturationSlider'></div>
                <input id='falsecolor-grayscale-saturation' class='psval saveable psuedoSaturation'  type="text" value='0.9' width='3'/> </div> -->

      <div class='psuedoColorRow'> Cutoff: &nbsp;
        <input id='falsecolor-grayscale-cutlow' class='psval saveable psuedoCutoffLow'  type="text"  value='0' width='5'/>&nbsp; to &nbsp;
        <input id='falsecolor-grayscale-cuthigh'class='psval saveable psuedoCutoffHigh'  type="text" value='0' width='5'/></span>&nbsp; ADC &nbsp;
      </div>
    </div>
    
    <div id="falsecolor-LOCS" class='falsecolor-tab'>
      Linearized Optimal Color Scale <br/>
      <div class='psuedoColorRow' > <span class='pslabel'>Shift</span>
                <div class='psslide psuedoDialOffsetSlider'></div>
                <input id='falsecolor-grayscale-dialoffset' class='psval saveable psuedoDialOffset' type="number" value='0' width='3'/></div>

      <div class='psuedoColorRow' > <span class='pslabel'>Warp</span> 
                <div class='psslide psuedoAdcScaleSlider'></div> 
                <input id='falsecolor-grayscale-adcscale' class='psval saveable psuedoAdcScale'  type="text"  value='36.5' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Scale</span>
                <div class='psslide psuedoDialScaleSlider'></div>
                <input id='falsecolor-grayscale-dialscale' class='psval saveable psuedoDialScale'  type="text"  value='-0.5' width='3'/> </div>
      <!-- <div class='psuedoColorRow' > <span class='pslabel'>Satr</span>
                <div class='psslide psuedoSaturationSlider'></div>
                <input id='falsecolor-locs-saturation' class='psval saveable psuedoSaturation'  type="text" value='0.9' width='3'/> </div> -->

      <div class='psuedoColorRow'> Cutoff: &nbsp;
        <input id='falsecolor-locs-cutlow' class='psval saveable psuedoCutoffLow'  type="text"  value='0' width='5'/>&nbsp; to &nbsp;
        <input id='falsecolor-locs-cuthigh'class='psval saveable psuedoCutoffHigh'  type="text" value='0' width='5'/></span>&nbsp; ADC &nbsp;
      </div>
    </div>
    


    <div id="falsecolor-Brightness" class='falsecolor-tab'>
      Simple Brightness on Color <br/>
      <div class='psuedoColorRow' > <span class='pslabel'>Shift</span>
                <div class='psslide psuedoDialOffsetSlider'></div>
                <input id='falsecolor-brightness-dialoffset' class='psval saveable psuedoDialOffset' type="number" value='0' width='3'/></div>

      <div class='psuedoColorRow' > <span class='pslabel'>Warp</span> 
                <div class='psslide psuedoAdcScaleSlider'></div> 
                <input id='falsecolor-brightness-adcscale' class='psval saveable psuedoAdcScale'  type="text"  value='20' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Scale</span>
                <div class='psslide psuedoDialScaleSlider'></div>
                <input id='falsecolor-brightness-dialscale' class='psval saveable psuedoDialScale'  type="text"  value='0.5' width='3'/> </div>
      <div class='psuedoColorRow' > <span class='pslabel'>Hue</span>
                <div class='psslide psuedoSaturationSlider'></div>
                <input id='falsecolor-brightness-saturation' class='psval saveable psuedoSaturation'  type="text" value='0.5' width='3'/> </div>

      <div class='psuedoColorRow'> Cutoff: &nbsp;
        <input id='falsecolor-locs-cutlow' class='psval saveable psuedoCutoffLow'  type="text"  value='0' width='5'/>&nbsp; to &nbsp;
        <input id='falsecolor-locs-cuthigh'class='psval saveable psuedoCutoffHigh'  type="text" value='0' width='5'/></span>&nbsp; ADC &nbsp;
      </div>
    </div>
    
    
    
    
    <div id="falsecolor-Blackbody" class='falsecolor-tab'>
      Simulated blackbody spectrum 1000K to 40000K<br/>
      <div class='psuedoColorRow' > <span class='pslabel'>Shift</span>
                <div class='psslide psuedoDialOffsetSlider'></div>
                <input id='falsecolor-blackbody-dialoffset' class='psval saveable psuedoDialOffset' type="number" value='0.25' width='3'/></div>

      <div class='psuedoColorRow' > <span class='pslabel'>Warp</span> 
                <div class='psslide psuedoAdcScaleSlider'></div> 
                <input id='falsecolor-blackbody-adcscale' class='psval saveable psuedoAdcScale'  type="text"  value='20' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Scale</span>
                <div class='psslide psuedoDialScaleSlider'></div>
                <input id='falsecolor-blackbody-dialscale' class='psval saveable psuedoDialScale'  type="text"  value='0.4' width='3'/> </div>
      <!-- <div class='psuedoColorRow' > <span class='pslabel'>Satr</span>
                <div class='psslide psuedoSaturationSlider'></div>
                <input id='falsecolor-locs-saturation' class='psval saveable psuedoSaturation'  type="text" value='0.9' width='3'/> </div> -->

      <div class='psuedoColorRow'> Cutoff: &nbsp;
        <input id='falsecolor-blackbody-cutlow' class='psval saveable psuedoCutoffLow'  type="text"  value='0' width='5'/>&nbsp; to &nbsp;
        <input id='falsecolor-blackbody-cuthigh'class='psval saveable psuedoCutoffHigh'  type="text" value='0' width='5'/></span>&nbsp; ADC &nbsp;
      </div>
    </div>


    <div id="falsecolor-RootRainbow" class='falsecolor-tab'>
      ROOT Rainbow<br/>
      <div class='psuedoColorRow' > <span class='pslabel'>Shift</span>
                <div class='psslide psuedoDialOffsetSlider'></div>
                <input id='falsecolor-rootrainbow-dialoffset' class='psval saveable psuedoDialOffset' type="number" value='0.25' width='3'/></div>

      <div class='psuedoColorRow' > <span class='pslabel'>Warp</span> 
                <div class='psslide psuedoAdcScaleSlider'></div> 
                <input id='falsecolor-rootrainbow-adcscale' class='psval saveable psuedoAdcScale'  type="text"  value='20' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Scale</span>
                <div class='psslide psuedoDialScaleSlider'></div>
                <input id='falsecolor-rootrainbow-dialscale' class='psval saveable psuedoDialScale'  type="text"  value='0.4' width='3'/> </div>
      <!-- <div class='psuedoColorRow' > <span class='pslabel'>Satr</span>
                <div class='psslide psuedoSaturationSlider'></div>
                <input id='falsecolor-locs-saturation' class='psval saveable psuedoSaturation'  type="text" value='0.9' width='3'/> </div> -->

      <div class='psuedoColorRow'> Cutoff: &nbsp;
        <input id='falsecolor-rootrainbow-cutlow' class='psval saveable psuedoCutoffLow'  type="text"  value='0' width='5'/>&nbsp; to &nbsp;
        <input id='falsecolor-rootrainbow-cuthigh'class='psval saveable psuedoCutoffHigh'  type="text" value='0' width='5'/></span>&nbsp; ADC &nbsp;
      </div>
    </div>


    <div id="falsecolor-Interp2" class='falsecolor-tab'>
      Two-color control point interpolation in RGB space<br/>
      <div class='psuedoColorRow' > <span class='pslabel'>Color 0</span>
                <input  type="text" data-index='0' id='falsecolor-interp2-color0'  class='saveable psuedo-color colorpicker' value='#FFFFFF'/>
              </div>
      <div class='psuedoColorRow' > <span class='pslabel'>Color 1</span>
                <input  type="text" data-index='1' id='falsecolor-interp2-color1'  class='saveable psuedo-color colorpicker' value='#0000FF'/>
              </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Shift</span>
                <div class='psslide psuedoDialOffsetSlider'></div>
                <input id='falsecolor-interp2-dialoffset' class='psval saveable psuedoDialOffset' type="number" value='-0.5' width='3'/></div>

      <div class='psuedoColorRow' > <span class='pslabel'>Warp</span> 
                <div class='psslide psuedoAdcScaleSlider'></div> 
                <input id='falsecolor-interp2-adcscale' class='psval saveable psuedoAdcScale'  type="text"  value='20' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Scale</span>
                <div class='psslide psuedoDialScaleSlider'></div>
                <input id='falsecolor-interp2-dialscale' class='psval saveable psuedoDialScale'  type="text"  value='0.25' width='3'/> </div>

      <div class='psuedoColorRow'> Cutoff: &nbsp;
        <input id='falsecolor-interp2-cutlow' class='psval saveable psuedoCutoffLow'  type="text"  value='0' width='5'/>&nbsp; to &nbsp;
        <input id='falsecolor-interp2-cuthigh'class='psval saveable psuedoCutoffHigh'  type="text" value='0' width='5'/></span>&nbsp; ADC &nbsp;
      </div>
    </div>

<!--
    <div id="falsecolor-Interp3" class='falsecolor-tab'>
      3-color control point interpolation in RGB space<br/>
      <div class='psuedoColorRow' > <span class='pslabel'>Color 0</span>
                <input  type="text" data-index='0' id='falsecolor-interp2-color0'  class='saveable psuedo-color colorpicker' value='#FFFFFF'/>
              </div>
      <div class='psuedoColorRow' > <span class='pslabel'>Color 1</span>
                <input  type="text" data-index='1' id='falsecolor-interp2-color1'  class='saveable psuedo-color colorpicker' value='#00FF00'/>
              </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Color 2</span>
                <input  type="text" data-index='2' id='falsecolor-interp2-color2'  class='saveable psuedo-color colorpicker' value='#0000FF'/>
              </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Shift</span>
                <div class='psslide psuedoDialOffsetSlider'></div>
                <input id='falsecolor-interp2-dialoffset' class='psval saveable psuedoDialOffset' type="number" value='-0.5' width='3'/></div>

      <div class='psuedoColorRow' > <span class='pslabel'>Warp</span>
                <div class='psslide psuedoAdcScaleSlider'></div>
                <input id='falsecolor-interp2-adcscale' class='psval saveable psuedoAdcScale'  type="text"  value='20' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Scale</span>
                <div class='psslide psuedoDialScaleSlider'></div>
                <input id='falsecolor-interp2-dialscale' class='psval saveable psuedoDialScale'  type="text"  value='0.25' width='3'/> </div>

      <div class='psuedoColorRow'> Cutoff: &nbsp;
        <input id='falsecolor-interp2-cutlow' class='psval saveable psuedoCutoffLow'  type="text"  value='0' width='5'/>&nbsp; to &nbsp;
        <input id='falsecolor-interp2-cuthigh'class='psval saveable psuedoCutoffHigh'  type="text" value='0' width='5'/></span>&nbsp; ADC &nbsp;
      </div>
    </div> -->

    <div id="falsecolor-Interp4" class='falsecolor-tab'>
      4-color control point interpolation in RGB space<br/>
      <div class='psuedoColorRow' > <span class='pslabel'>Color 0</span>
                <input  type="text" data-index='0' id='falsecolor-interp2-color0'  class='saveable psuedo-color colorpicker' value='#FFFFFF'/>
              </div>
      <div class='psuedoColorRow' > <span class='pslabel'>Color 1</span>
                <input  type="text" data-index='1' id='falsecolor-interp2-color1'  class='saveable psuedo-color colorpicker' value='#00FF00'/>
              </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Color 2</span>
                <input  type="text" data-index='2' id='falsecolor-interp2-color2'  class='saveable psuedo-color colorpicker' value='#0000FF'/>
              </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Color 3</span>
                <input  type="text" data-index='3' id='falsecolor-interp2-color3'  class='saveable psuedo-color colorpicker' value='#0000FF'/>
              </div>
              
      <div class='psuedoColorRow' > <span class='pslabel'>Shift</span>
                <div class='psslide psuedoDialOffsetSlider'></div>
                <input id='falsecolor-interp2-dialoffset' class='psval saveable psuedoDialOffset' type="number" value='-0.5' width='3'/></div>

      <div class='psuedoColorRow' > <span class='pslabel'>Warp</span> 
                <div class='psslide psuedoAdcScaleSlider'></div> 
                <input id='falsecolor-interp2-adcscale' class='psval saveable psuedoAdcScale'  type="text"  value='20' width='3'/> </div>

      <div class='psuedoColorRow' > <span class='pslabel'>Scale</span>
                <div class='psslide psuedoDialScaleSlider'></div>
                <input id='falsecolor-interp2-dialscale' class='psval saveable psuedoDialScale'  type="text"  value='0.25' width='3'/> </div>

      <div class='psuedoColorRow'> Cutoff: &nbsp;
        <input id='falsecolor-interp2-cutlow' class='psval saveable psuedoCutoffLow'  type="text"  value='0' width='5'/>&nbsp; to &nbsp;
        <input id='falsecolor-interp2-cuthigh'class='psval saveable psuedoCutoffHigh'  type="text" value='0' width='5'/></span>&nbsp; ADC &nbsp;
      </div>
    </div>

    <!-- <div class='psuedoColorRow' > <span class='pslabel'>CutRMS</span>
                <div class='psslide psuedoPedWidthCutoffSlider'></div>
                <input id='pedwidth-cutoff' class='psval saveable psuedoPedWidthCutoff'  type="text" value='3.0' width='2' style='width:20px'/> RMS</div> -->
    <div class='psuedoColorRow' > <input type="checkbox" id="ctl-coherent-noise-filter" name="ctl-coherent-noise-filter" class="saveable ctl-coherent-noise-filter"  checked="checked"/><label for="ctl-coherent-noise-filter"><b>(f)</b> Coherent Noise Filter</label></div>
    <div class='psuedoColorRow' > Bad Channels: 
      <label><input type='radio' class='ctl-bad-wire-filter' id='ctl-bad-wire-filter0' name='radio-bad-wire-filter' value='0' checked="checked"/>Zero </label>
      <label><input type='radio' class='ctl-bad-wire-filter' id='ctl-bad-wire-filter1' name='radio-bad-wire-filter' value='1'/>Show</label>
      <label><input type='radio' class='ctl-bad-wire-filter' id='ctl-bad-wire-filter2' name='radio-bad-wire-filter' value='2'/>Black</label>
    </div>

   <div class='psuedoColorRow' > <input type="checkbox" id="ctl-gl-edge-finder" name="ctl-gl-edge-finder" class="saveable ctl-gl-edge-finder"/><label for="ctl-gl-edge-finder"><b>(/)</b>WebGL edge finder</label></div>
 


</div> <!-- A-FalseColorControl -->
 <div class="wireimg-encoded-progressbar" style="position: relative; text-align:center;">
   <div class="wireimg-encoded-progressbar-text" style="position: absolute; color:black; width:100%"></div></div>
</div> <!-- portlet-content -->
</div> <!-- portlet -->



      <div class="portlet" id="wireinfo-port"> 
<div class="portlet-header">Wire Info</div>
  <div  class="portlet-content">
    <div class="A-WireInfo">
      <div class="WireInfo-text"></div>
      <div class="WireInfo-graph" style="height:200px"></div>
      (Blue line is coherent noise.)
    </div>
  </div>
</div>  <!-- portlet -->

      <div class="portlet" id="timehistogram-port"> 
  <div class="portlet-header">Time Histogram (Sum all wires)</div>
  <div class="portlet-content">
    <div class="A-TimeHistogram""></div>
  </div>
</div>




      <div class="portlet" id="hithistogram-port"> 
  <div class="portlet-header">Hit Color</div>
  <div class="portlet-content">
    <div class="A-HitHistogram" style="height: 120px"></div>
    <select class="hit-hist-field saveable" id="hit-hist-field">
      <option value="q"     selected="selected">Charge</option>
      <option value="t"                        >Time</option>
      <option value="σq"                       >σ Charge</option>
      <option value="σt"                       >σ Time</option>
      <option value="view"                     >View</option>
      <option value="wire"                     >Wire</option>
      <option value="plane"                    >Plane</option>
      <option value="m"                        >Multiplicity</option>
    </select>
        <select  id="ctl-hit-color-scale" class="saveable">
			<option value="RedBluePalette" selected="selected">Red-Blue</option>
			<option value="BrownPurplePalette">Brown-Purple</option>
			<option value="GrayscalePalette">Grayscale</option>
			<option value="CurtPalette">Curt's</option>
			<option value="PhilipColorPalette"  >Philip's</option>
			
		</select><br/>
    <label><input type='checkbox' class='saveable hit-cut-max' /> Cut high</label>
    <label><input type='checkbox' class='saveable hit-cut-min' checked="checked" /> Cut low</label>
  </div>
</div>



  
      <div class="portlet" id="zoomcontrol-port"> 
  <div class="portlet-header">Zoom Control</div>
  <div class="portlet-content">
    <div class="A-ZoomControl"></div>
    <span class="ZoomControl-Info"></span>
    <span class="ZoomControl-Controls align-right">
      <button type="button" class="zoom-auto">Auto</button>
      <button type="button" class="zoom-full">Full</button>
    </span>
  </div>
</div>



    </div>
  
    <div id='main-column' style="flex: 5 70%; min-width: 300px;">
      <div id='live-wireview-container2' style='width:100%'>

      <div class="portlet hidden-by-default" id="live0-wireimg-port">
        <div class="portlet-header">"U" View / View 0 / Plane 0</div>
        <div class="portlet-content" style="background-color:white">
             <div class="pad A-WireView"      data-options='{"plane": 0}'></div>
             <!-- <div class="pad A-WireHistogram" data-options='{"plane": 0}'></div> -->
        </div>
      </div>


      <div class="portlet hidden-by-default" id="live1-wireimg-port">
        <div class="portlet-header">"V" View / View 1 / Plane 1</div>
        <div class="portlet-content" style="background-color:white">
            <div class="pad A-WireView"      data-options='{"plane": 1}'></div>
            <!-- <div class="pad A-WireHistogram" data-options='{"plane": 1}'></div> -->
        </div>
      </div>

      <div class="portlet" id="live2-wireimg-port">
        <div class="portlet-header">"Y" View / View 2 / Plane 2</div>
        <div class="portlet-content" style="background-color:white">
            <div class="pad A-WireView"      data-options='{"plane": 2}'></div>
            <!-- <div class="pad A-WireHistogram" data-options='{"plane": 2}'></div> -->
        </div>
      </div>

          <div class="portlet" id="ophit-port" style="height:400px; display:flex; flex-direction: column;"> 
      <div class="portlet-header" style="flex: 0 0 auto;">Optical Hits</div>
      <div class="portlet-content" style="flex: 1 1 0;   display:flex; flex-direction: column;">

        <!-- <div style="height:100%; display:flex; flex-direction: column; "> -->

          <div class="nonsqueezeable" style="min-height: 0; min-width:0; flex:1 1 0;  width:100%; display: flex; flex-direction: row; flex-wrap:nowrap; ">
            <!-- Flex 1 1 0 means equal width -->
            <div class="A-OpHitHistogram" style="flex: 1 1 0; min-width:0;"></div>
            <div class="A-OpHitMap"       style="flex: 1 1 0; min-width:0;"></div>
          </div>

          <div class="nonsqueezeable" style="min-height: 0; min-width:0; flex:2 2 0;  width:100%; display:flex; flex-direction: row; flex-wrap:nowrap;  ">
            <!-- Flex 4 4 0 and 1 1 0 means the first is four times wider than the second. -->
            <!-- min-width:0 means that internal content is ignored, so the canvas inside can be squished or whatever. -->
            <div class="A-OpHit2dMap"           style="flex: 4 4 0; min-width:0;"></div>
            <div class="A-OpHit2dMapProjection" style="flex: 1 1 0; min-width:0;" ></div>
          </div>
        <!-- </div> -->

      </div> <!-- portlet-content -->
    </div> <!-- portlet -->


            <div><label>OpHits</label></div>
            <div><b>(shift-O)</b>  <select id="ctl-OpHitLists"  class="saveable align-right"></select><div style="clear:both;"></div></div>

      </div> <!-- live-wireview-container-->
  
    </div> <!-- main-column -->
  </div> <!--display-zone -->
  <div id="footer">
        <div class="portlet" id="expert-port">
      <div class="portlet-header">Debugging Info</div>     
      <div id="debug" class="portlet-content" >
        <div id="debuglinks"></div>
        <div id="debuginfo"></div>
        <div id="stateMachineStats"></div>
        
        <div class="collapsible-title" data-revealed="false">Console Time Stats</div> 
        <div class="A-TimeLogger collabsible"></div>
        
        <div class="collapsible-title" data-revealed="false">Debugging log:</div> 
        <div class="collabsible"  id="debuglog"></div>

        <div class="collapsible-title" data-revealed="false">Benchmarks for this 
session:</div> 
        <div class="collabsible" id="debugbench" ></div>
      </div> 
    </div>


    
  <table style="display:inline; border:0;"><tr>
   <td><img src="images/Otterbein.png" width="100" height="100" alt="logo"/></td>
   <td>
     Argo Event Display, Built and Maintained by <a href="http://faculty.otterbein.edu/NTagg">Nathaniel Tagg</a>,
       <a href="http://www.otterbein.edu">Otterbein College</a><br/>
   
     Send any comments, bug reports, or suggestions to Nathaniel at NTagg (at) otterbein.edu.<br/>
     This work is supported by the <a href="www.nsf.gov">National Science Foundation</a>.<br/>
     <p style="font-size: 0.875em">About the name <a href="http://argo-microboone.fnal.gov/help/#argo">Argo</a></p>
   </td>
   <td>
     <img src="images/ublogo.jpg" height="100" alt="ublogo" />
   </td>
   </tr>
</table>

  
  </div> <!-- footer -->
  
  
  <!-- hidden stuff. -->
  <div id="static-config" style="display:none;">


    <div><input type="checkbox" id="ctl-magnifying-glass"  class="saveable" name="ctl-magnifying-glass"   checked="checked" /><label for="ctl-magnifying-glass"  ><b>(g)</b> Magnifying glass</label></div>
      <div id="mag-sliders">
        <div>
        <label for="ctl-magnifier-size">Mag. Size:</label>         
        <input id="ctl-magnifier-size" class="saveable" type="text" value="80" size="4" />
        </div>
        <div id="ctl-magnifier-size-slider"></div>
        <div>
        <label for="ctl-magnifier-mag">Magnification:</label>         
        <input id="ctl-magnifier-mag"  class="saveable" type="text" value="5" size="4" />          
        </div>
        <div id="ctl-magnifier-mag-slider"></div>
      </div>
      <div><input type="checkbox" id="ctl-histo-logscale" name="ctl-histo-logscale" checked="checked" class="saveable  ctl-histo-logscale"/><label for="ctl-histo-logscale"><b>(l)</b>og-scale Histograms</label></div>
      <div><input type="checkbox" id="ctl-show-labels" name="ctl-show-labels" checked="checked" class="saveable"/><label for="ctl-show-labels">Draw Axis Labels</label></div>
      <div><input type="checkbox" id="ctl-show-tick-labels" name="ctl-show-tick-labels" checked="checked" class="saveable"/><label for="ctl-show-tick-labels">Draw Tick Values</label></div>
      <div><input type="checkbox" id="ctl-lock-aspect-ratio" name="ctl-lock-aspect-ratio"  class="saveable"/><label for="ctl-lock-aspect-ratio">Lock TDC/Wire aspect ratio</label></div>
      <div></div>
      <div><b>(Shift-W)</b>
        <span class="align-right">
        <input type="radio" id="ctl-show-wireimg-raw" value="raw" name="show-wireimg-type" class="saveable show-wireimg-raw"   checked="checked"      /><label for="ctl-show-wireimg-raw">Raw</label>
        <input type="radio" id="ctl-show-wireimg-cal" value="cal" name="show-wireimg-type" class="saveable show-wireimg-cal"  />     <label for="ctl-show-wireimg-cal">Calibrated</label>
        </span>
        <div style="clear:both;"></div>
        </div>
      
        
      <div><input type="checkbox" id="ctl-show-clus"    name="show-clus"    class="saveable show-clus"                 /><label for="ctl-show-clus">    <b>(c)</b> Show Clusters </label></div>
      <div><b>(shift-C)</b> <select id="ctl-ClusterLists"  class="align-right"></select><div style="clear:both;"></div></div>

        <div><b>(shift-H)</b> <select id="ctl-HitLists"  class="align-right"></select><div style="clear:both;"></div></div>

      <div><input type="checkbox" id="ctl-show-endpoint2d"    name="show-endpoint2d"    class="saveable show-endpoint2d"                 /><label for="ctl-show-endpoint2d"> <b>(e)</b>  Show Endpoint2Ds </label></div>
      <div> <b>(shift-E)</b><select id="ctl-EndpointLists"  class="align-right"></select><div style="clear:both;"></div></div>
      
      <div><input type="checkbox" id="ctl-show-spoints" name="show-spoints" class="saveable show-spoints"              /><label for="ctl-show-spoints"> <b>(s)</b> Show Spacepoints </label></div>
      <div><b>(shift-S)</b> <select id="ctl-SpacepointLists"  class="align-right"></select><div style="clear:both;"></div></div>

      <div><input type="checkbox" id="ctl-show-tracks"  name="show-tracks"  class="saveable show-tracks"  /><label for="ctl-show-tracks">  <b>(t)</b> Show Tracks </label></div>
      <div><b>(shift-T)</b> <select id="ctl-TrackLists"  class="align-right"></select><div style="clear:both;"></div></div>
      <div>&nbsp;&nbsp;<input type="checkbox" id="ctl-track-shift-window"      name="track-shift-window"      class="saveable track-shift-window"  /><label for="track-shift-window">      <b>(o)</b> Shift Tracks 1 Window</label></div>

      <div><label><input type="checkbox" id="ctl-show-pfparticles"  name="show-pfparticles"  class="saveable show-pfparticles"  /><b>(f)</b> Show PFParticles </label></input></div>
      <div><b>(shift-F)</b> <select id="ctl-PFParticleLists"  class="align-right"></select><div style="clear:both;"></div></div>
          
      <div><input type="checkbox" id="ctl-show-mc"      name="show-mc"      class="saveable show-mc"      /><label for="ctl-show-mc">      <b>(m)</b> Show MC </label></div>
      <div>&nbsp;&nbsp;<input type="checkbox" id="ctl-show-mc-neutrals"      name="show-mc-neutrals"      class="saveable show-mc-neutrals"  /><label for="ctl-show-mc">      <b>(M)</b> Show neutral particles </label></div>
      <div>&nbsp;&nbsp;<input type="checkbox" id="ctl-mc-move-tzero"      name="ctl-mc-move-tzero"      class="saveable ctl-mc-move-tzero"  /><label for="ctl-mc-move-tzero">      <b>(z)</b> Fake t-zero </label></div>
        <!-- <div class="align-right"><div id="ctl-MCLists"></div><div style="clear:both;"></div></div> -->

    
  </div>

  <!-- Message of the Day. -->
<div id="MOTD" style="display:none;"> 
  <div>
    <div id="load-progressbar"></div>
    <!-- <img style='float:left; padding: 10px;' src="images/busy.gif" alt="busy"/> -->
    <!-- <img style='float:left; padding: 10px;width:80px' src="images/cool2.gif" alt="busy"/> -->
    <div id='main-circleprogress' style='float:left; padding: 10px; height: 100px; width:100px; text-align: center; position: relative; display:inline-block;'>
      <strong style="position: absolute; top:40px; left:0; width: 100%; text-align: center; font-size: 15px;"></strong></div>
    <p>Querying server for event data...</p>
    <div id="loading_feedback"></div>
  </div>
  <!-- <p><em>Message of the day:</em></p> -->
  <div style="clear:both;">
  Recent updates:
    <ul> 
      <li> Hello MasterClass! </li>
      <li> Updated sum-hit window. Changed all-track info to be collection only. (Oct 2018) </li>
      <li> Attempt to auto-fit track and hit offset settings, as well as tick-per-cm from looking at hit/track associations (Oct 2018) </li>
    </ul>
  </div>
</div> 

  <!-- <embed src="images/click.wav" autostart="false" width="0" height="0" id="sound1" enablejavascript="true"> -->

  
  <div id="warning-dialog" title="Warning">
     <p id="warning-dialog-message"></p>
   </div>
   
   <div id="selected-object-info" class="triangle-isosceles left floating ui-widget-content">
  <div class="selected-object-info"></div>
  <!-- <div class="unit-ctl" style="display:none;">
      <input type="radio"  name="unit-ctl" id="unit-radio1" value="MeV" checked="checked"/><label for="unit-radio1">MeV</label>
      <input type="radio"  name="unit-ctl" id="unit-radio2" value="SI" />             <label for="unit-radio2">SI</label>
  </div> -->
</div>

   
</div> <!-- Everything -->
</body>
</html>
